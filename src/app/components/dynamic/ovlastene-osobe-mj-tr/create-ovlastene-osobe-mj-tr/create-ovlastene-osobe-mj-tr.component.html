<div 
cdkDrag
cdkDragRootElement=".cdk-overlay-pane" 
cdkDragHandle 
cdkDragBoundary=".cdk-overlay-container"
class="colored-header text-align-center">
	{{ 'Creating' | translate }}
    <mat-icon class="dialog-close-button" mat-dialog-close >close</mat-icon>

</div>

<mat-dialog-content class="small-margin-and-center-title">

	<h2 mat-dialog-title class="text-align-center">
		<mat-icon class="dialog-title-icon">person</mat-icon>
		<mat-icon class="dialog-title-icon">add</mat-icon>
		<span class="dialog-title">{{ 'OvlasteneOsobeMjTrCreation' | translate }}</span>
  	</h2>

	<div class="form-container">
		<table>
			<tr>
				<td>
					<label for="ID" class="minimum-margin-top">{{ 'ID' | translate }}:</label>
				</td>
                <td style="display: flex;max-width: 250px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;">
                    <mat-icon matSuffix class="minimum-margin-left cursor-pointer display-flex"
                        (click)="pickOperateri();" (contextmenu)="removeOperateri($event)"
                        matTooltip="{{ (!OvlastenaOsobaMjTr.ID ? 'ClickToSelectFromDialogToFill' : '') | translate }}"
                        [class.color-valid]="varNames.NAZIV">
                        {{ varNames!.NAZIV ? 'done' : 'import_contacts'}}
                    </mat-icon>
                    <span
                        (click)="refreshOperateri(OvlastenaOsobaMjTr!.ID, false);">
                        <input type="text" [(ngModel)]="OvlastenaOsobaMjTr.ID" maxlength="22"
                            class="minimum-margin-horizontal light-gray-background" style="width: 50px;"
                            placeholder="{{ 'Code' | translate }}"
                            (blur)="OfferedOperateri();resetOperateri();"
                            (ngModelChange)="filterOperateri(OvlastenaOsobaMjTr!.ID);"
                            (focus)="refreshOperateri(OvlastenaOsobaMjTr!.ID, false);"
                            (keyup.enter)="selectOperateri(offeredOperateri[OperateriDropdownIndex]);"
                            (keyup.escape)="resetOperateri();"
                            (keyup.arrowdown)="OperateriDropdownIndex = (OperateriDropdownIndex + 1) % offeredOperateri.length;globalFn.scroll('offeredOperateri-dropdown-' + OperateriDropdownIndex);"
                            (keyup.arrowup)="OperateriDropdownIndex = (OperateriDropdownIndex - 1 + offeredOperateri.length) % offeredOperateri.length;globalFn.scroll('offeredOperateri-dropdown-' + OperateriDropdownIndex);">
                        <div id="offeredOperateri-dropdown" class="select-dropdown-content max-height-300px"
                            style="z-index: 500;">
                            <div [id]="'offeredOperateri-dropdown-' + i"
                                *ngFor="let zaposleni of offeredOperateri; index as i" matRipple
                                class="dropdown-content-item display-flex align-items-center space-between"
                                [class.gray-background]="i == OperateriDropdownIndex"
                                (mousedown)="selectOperateri(zaposleni);">
                                <span>
                                    <b>{{ zaposleni.ID }}</b> ({{ zaposleni.NAZIV }})
                                </span>
                            </div>
                        </div>
                    </span>
                    <span class="small-margin-left margin-right" matTooltip="{{ varNames!.NAZIV }}"
                        matTooltipShowDelay="1000">{{
                        varNames!.NAZIV }}</span>
                </td>
			</tr>
			<tr>
				<td>
					<label for="SIF_OJ" class="minimum-margin-top">{{ 'SIF_OJ' | translate }}:</label>
				</td>
                <td style="display: flex;max-width: 250px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;">
                    <mat-icon matSuffix class="minimum-margin-left cursor-pointer display-flex"
                        (click)="pickOrganizationalUnits();" (contextmenu)="removeOrganizationalUnits($event)"
                        matTooltip="{{ (!OvlastenaOsobaMjTr.SIFMJTR ? 'ClickToSelectFromDialogToFill' : '') | translate }}"
                        [class.color-valid]="varNames.NAZ_OJ">
                        {{ varNames!.NAZ_OJ ? 'done' : 'import_contacts'}}
                    </mat-icon>
                    <span
                        (click)="refreshOrganizationalUnits(OvlastenaOsobaMjTr!.SIFMJTR, false);">
                        <input type="text" [(ngModel)]="OvlastenaOsobaMjTr.SIFMJTR" maxlength="22"
                            class="minimum-margin-horizontal light-gray-background" style="width: 50px;"
                            placeholder="{{ 'Code' | translate }}"
                            (blur)="OfferedOrganizationalUnits();resetOrganizationalUnits();"
                            (ngModelChange)="filterOrganizationalUnits(OvlastenaOsobaMjTr!.SIFMJTR);"
                            (focus)="refreshOrganizationalUnits(OvlastenaOsobaMjTr!.SIFMJTR, false);"
                            (keyup.enter)="selectOrganizationalUnits(offeredOrganizacijskeJedinice[OrganizacijskeJediniceDropdownIndex]);"
                            (keyup.escape)="resetOrganizationalUnits();"
                            (keyup.arrowdown)="OrganizacijskeJediniceDropdownIndex = (OrganizacijskeJediniceDropdownIndex + 1) % offeredOrganizacijskeJedinice.length;globalFn.scroll('offeredOrganizacijskeJedinice-dropdown-' + OrganizacijskeJediniceDropdownIndex);"
                            (keyup.arrowup)="OrganizacijskeJediniceDropdownIndex = (OrganizacijskeJediniceDropdownIndex - 1 + offeredOrganizacijskeJedinice.length) % offeredOrganizacijskeJedinice.length;globalFn.scroll('offeredOrganizacijskeJedinice-dropdown-' + OrganizacijskeJediniceDropdownIndex);">
                        <div id="offeredOrganizacijskeJedinice-dropdown" class="select-dropdown-content max-height-300px"
                            style="z-index: 500;">
                            <div [id]="'offeredOrganizacijskeJedinice-dropdown-' + i"
                                *ngFor="let organizationalUnits of offeredOrganizacijskeJedinice; index as i" matRipple
                                class="dropdown-content-item display-flex align-items-center space-between"
                                [class.gray-background]="i == OrganizacijskeJediniceDropdownIndex"
                                (mousedown)="selectOrganizationalUnits(organizationalUnits);">
                                <span>
                                    <b>{{ organizationalUnits.SIF_OJ }}</b> ({{ organizationalUnits.NAZ_OJ }})
                                </span>
                            </div>
                        </div>
                    </span>
                    <span class="small-margin-left margin-right" matTooltip="{{ varNames!.NAZ_OJ }}"
                        matTooltipShowDelay="1000">{{
                        varNames!.NAZ_OJ }}</span>
                </td>
			</tr>
			<tr>
				<td>
					<label for="OD" class="minimum-margin-top">{{ 'OD' | translate }}:</label>
				</td>
				<td>
					<input id="OD" type="time" class="minimum-margin width-276-px" [(ngModel)]="OvlastenaOsobaMjTr!.OD" placeholder="{{ 'OD' | translate }}">
				</td>
			</tr>
            <tr>
				<td>
					<label for="DO" class="minimum-margin-top">{{ 'DO' | translate }}:</label>
				</td>
				<td>
					<input id="DO" type="time" class="minimum-margin width-276-px" [(ngModel)]="OvlastenaOsobaMjTr!.DO" placeholder="{{ 'DO' | translate }}">
				</td>
			</tr>
            <tr>
				<td>
					<label for="SATI" class="minimum-margin-top">{{ 'SATI' | translate }}:</label>
				</td>
				<td>
					<input id="SATI" class="minimum-margin width-276-px" [(ngModel)]="OvlastenaOsobaMjTr!.SATI" placeholder="{{ 'SATI' | translate }}">
				</td>
			</tr>
		</table>
	</div>
</mat-dialog-content>

<mat-dialog-actions align="end">
	<button mat-button [mat-dialog-close]="true">{{ 'Cancel' | translate }}</button>
	<button mat-raised-button type="button" color="primary" [mat-dialog-close]="true" (click)="save();"
		[disabled]="validateForm(OvlastenaOsobaMjTr!)">{{ 'Create' | translate }}</button>
</mat-dialog-actions>